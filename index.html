<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- â‘  æå‰æ”¾è·³è½¬è„šæœ¬ï¼šè¯†åˆ«æ‰‹æœº/å¹³æ¿ç›´æ¥å» mobile.htmlï¼ˆå¯ç”¨ ?desktop=1 å¼ºåˆ¶çœ‹æ¡Œé¢ç‰ˆï¼‰ -->
  <script>
    (function () {
      var isMobileUA = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      var isSmallScreen = Math.min(screen.width, screen.height) <= 820;
      var forceDesktop = new URLSearchParams(location.search).has('desktop');
      if ((isMobileUA || isSmallScreen) && !forceDesktop) {
        // ç”¨ replace é˜²æ­¢è¿”å›é”®å¾ªç¯
        location.replace('MOBILE.html');
      }
    })();
  </script>

  <link rel="icon" href="https://i.postimg.cc/vTq8ZSfy/05.png" type="image/png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Burn1ngChrome;)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css">
  <style>
    /* åªé’ˆå¯¹éŸ³ä¹çƒ­ç‚¹ï¼Œéšè—é»˜è®¤çš„å°ç™½ç‚¹åº•åº§ */
.pnlm-hotspot.hs-music .pnlm-hotspot-base {
  display: none !important;
}

    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
      background: #0b0b0b;
    }
    #pano {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
    }

    /* è‡ªå®šä¹‰å›¾ç‰‡çƒ­ç‚¹å¤–å±‚ï¼ˆPannellum ä¼šæŠŠå®ƒå®šä½åˆ°è§†å›¾é‡Œï¼‰ */
    .hs-portal {
      pointer-events: auto;           /* å…è®¸ç‚¹å‡» */
      transform: translateZ(0);       /* æ›´é¡ºæ»‘ */
    }

    /* å›¾ç‰‡æœ¬ä½“ç”¨ backgroundï¼Œæ–¹ä¾¿ hover åˆ‡æ¢ */
    .hs-portal .hs-img {
      width: 160px;                   /* æ¡Œé¢é»˜è®¤å°ºå¯¸ */
      height: 160px;
      background-size: contain;
      background-position: center;
      background-repeat: no-repeat;
      cursor: pointer;
      transition: transform .15s ease;
      will-change: transform, background-image;
      touch-action: manipulation; /* ç§»åŠ¨ç«¯æ›´å¥½ç‚¹å‡» */
    }
    .hs-portal .hs-img:hover {
      transform: scale(1.06);         /* æ¡Œé¢è½»å¾®æ”¾å¤§åé¦ˆ */
    }

    /* æ—è¾¹æ–‡å­—æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰ */
    .hs-portal .hs-label {
      margin-top: 8px;
      text-align: center;
      font: 700 22px/1.1 "Helvetica Neue", Arial, sans-serif;
      color: #111;
      text-shadow: 0 1px 2px rgba(255,255,255,.6);
      pointer-events: none;
      user-select: none;
    }

    /* å“åº”å¼ï¼šå°å±æ—¶ï¼ˆå³ä¾¿å¼ºåˆ¶æ¡Œé¢ï¼‰ä¹Ÿç¼©å°çƒ­ç‚¹å°ºå¯¸ï¼Œé¿å…è¿‡å¤§ */
    @media (max-width: 1024px) {
      .hs-portal .hs-img { width: 120px; height: 120px; }
    }
    @media (max-width: 820px) {
      .hs-portal .hs-img { width: 96px; height: 96px; }
    }

    /* å…œåº•æç¤ºå±‚ï¼ˆå½“ WebGL/èµ„æºå¤±è´¥æ—¶æ˜¾ç¤ºï¼‰ */
    .fallback {
      position: fixed; inset: 0; display: none; place-items: center;
      color: #fff; background: #0b0b0b; padding: 24px; text-align: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }
    .fallback a { color: #ff4d4f; }

    /* å°æé†’è§’æ ‡ï¼ˆå¯é€‰ï¼‰ */
    .music-badge {
      position: absolute;
      right: 6px; bottom: 6px;
      width: 14px; height: 14px; border-radius: 50%;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 1px 3px rgba(0,0,0,.25);
      pointer-events: none;
      display: none;
    }
    .hs-portal.hs-music .music-badge { display: block; }
  </style>
</head>
<body>
  <div id="pano" aria-label="Panorama"></div>
  <div id="fallback" class="fallback">
    <div>
      <h2 style="margin:0 0 12px">åŠ è½½å…¨æ™¯å¤±è´¥æˆ–è®¾å¤‡ä¸æ”¯æŒ WebGL</h2>
      <p style="margin:0 0 16px">ä½ å¯ä»¥æµè§ˆè½»é‡ç‰ˆé¡µé¢ï¼š</p>
      <p><a href="MOBILE.html">ğŸ‘‰ å‰å¾€ mobile.html</a></p>
      <p style="margin-top:16px;font-size:14px;opacity:.75">
        å¦‚éœ€ç»§ç»­å°è¯•æ¡Œé¢ç‰ˆï¼Œå¯åˆ·æ–°é¡µé¢ï¼›æˆ–æ£€æŸ¥ç½‘ç»œ / èµ„æºé“¾æ¥æ˜¯å¦å¯è¾¾ã€‚
      </p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>
  <script>
    // ===== éŸ³é¢‘æ’­æ”¾å™¨ï¼ˆå•ä¾‹ï¼‰ =====
    let bgAudio = new Audio();          // å•ä¸€ audio element
    bgAudio.loop = true;
    bgAudio.preload = 'auto';
    bgAudio.volume = 0.6;               // å¯è°ƒæ•´
    let isPlaying = false;
    let autoplayBlocked = false;

    // å°è¯•è‡ªåŠ¨æ’­æ”¾ï¼ˆé¡µé¢æ‰“å¼€æ—¶ï¼‰
    function tryAutoplay(src) {
      if (src) bgAudio.src = src;
      // Safari/iOS ç­‰ä¼šæ‹’ç»å¸¦å£°è‡ªåŠ¨æ’­æ”¾ â€”â€” æ•è· promise
      bgAudio.play().then(() => {
        isPlaying = true;
        updateMusicHotspotsVisual();
      }).catch((err) => {
        // è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼ˆå¸¸è§äºç§»åŠ¨ç«¯æˆ–æµè§ˆå™¨ç­–ç•¥ï¼‰
        autoplayBlocked = true;
        isPlaying = false;
        updateMusicHotspotsVisual();
        // ä¸æŠ›é”™
      });
    }

    // æ’­æ”¾/æš‚åœåˆ‡æ¢
    function toggleAudio() {
      if (!bgAudio.src) return;
      if (isPlaying) {
        bgAudio.pause();
        isPlaying = false;
        updateMusicHotspotsVisual();
      } else {
        bgAudio.play().then(() => {
          isPlaying = true;
          updateMusicHotspotsVisual();
        }).catch(()=> {
          // å¦‚æœ play å†æ¬¡è¢«é˜»æ­¢ï¼ˆåº”å°‘è§ï¼‰ï¼Œä¿ç•™çŠ¶æ€
          autoplayBlocked = true;
          isPlaying = false;
          updateMusicHotspotsVisual();
        });
      }
    }

    // æ›´æ–°é¡µé¢ä¸Šæ‰€æœ‰â€œéŸ³ä¹çƒ­ç‚¹â€çš„æ˜¾ç¤ºï¼ˆplaying/defaultï¼‰
    function updateMusicHotspotsVisual() {
      // æ‰¾åˆ° Pannellum æ’å…¥çš„çƒ­ç‚¹ DOMï¼ˆclass hs-portal + data-role=musicï¼‰
      document.querySelectorAll('.hs-portal.hs-music').forEach(hot => {
        const imgBox = hot.querySelector('.hs-img');
        if (!imgBox) return;
        const playing = hot.dataset.playingUrl || hot.dataset.hoverUrl || hot.dataset.defaultUrl;
        const normal  = hot.dataset.defaultUrl;
        // å¦‚æœå½“å‰å¤„äº hoverï¼ˆæµè§ˆå™¨é¼ æ ‡æŒ‡å‘ï¼‰ï¼Œè®© hover è¡Œä¸ºç»§ç»­ä¼˜å…ˆï¼ˆhover handler ä¼šè¦†ç›–ï¼‰
        if (isPlaying) {
          imgBox.style.backgroundImage = `url("${hot.dataset.playingUrl || hot.dataset.hoverUrl || hot.dataset.defaultUrl}")`;
          hot.setAttribute('aria-pressed','true');
        } else {
          imgBox.style.backgroundImage = `url("${normal}")`;
          hot.setAttribute('aria-pressed','false');
        }
      });
    }

    // ====== 0) åŸºç¡€èƒ½åŠ›æ£€æµ‹ï¼šæ—  WebGL ç›´æ¥ç»™å…œåº• ======
    (function ensureWebGL(){
      try {
        var c = document.createElement('canvas');
        var gl = c.getContext('webgl') || c.getContext('experimental-webgl');
        if (!gl) throw new Error('No WebGL');
      } catch(e) {
        document.getElementById('fallback').style.display = 'grid';
        throw e;
      }
    })();

    // ====== 1) åˆå§‹åŒ–å…¨æ™¯ï¼ˆä½ åŸæ¥çš„é…ç½®ï¼Œå¤§è‡´ä¿æŒï¼‰ ======
    const viewer = pannellum.viewer('pano', {
      type: 'equirectangular',
      panorama: 'main-01.jpg',   // â† å…¨æ™¯å›¾ï¼ˆä¿æŒï¼‰
      autoLoad: true,
      mouseZoom: false,
      keyboardZoom: false,
      doubleClickZoom: false,
      showZoomCtrl: false,
      hfov: 95, minHfov: 95, maxHfov: 95,
      yaw: 0, minYaw: -100, maxYaw: 100,
      pitch: 15, minPitch: -60, maxPitch: 47,
      showFullscreenCtrl: false,
      showControls: false,
      compass: false,
      hotSpots: [
        /* åŸæ¥çƒ­ç‚¹ 1ï¼šWORK */
        {
          yaw: 4, pitch: 17, cssClass: 'hs-portal',
          createTooltipFunc: imageHotspot,
          createTooltipArgs: {
            width: 140,
            defaultUrl: 'https://i.postimg.cc/pLVStr1j/234-02.png',
            hoverUrl:   'https://i.postimg.cc/vTq8ZSfy/05.png',
            label: ''
          },
          clickHandlerFunc: navigateHotspot,
          clickHandlerArgs: { url: 'WORK.html', target: '_self' }
        },

        /* åŸæ¥çƒ­ç‚¹ 2ï¼šABOUT */
        {
          yaw: 1, pitch: 35, cssClass: 'hs-portal',
          createTooltipFunc: imageHotspot,
          createTooltipArgs: {
            width: 180,
            defaultUrl: 'https://i.postimg.cc/Qd02Mpcq/234-04.png',
            hoverUrl:   'https://i.postimg.cc/dQrHFYsJ/Inspo.png',
            label: ''
          },
          clickHandlerFunc: navigateHotspot,
          clickHandlerArgs: { url: 'ABOUT ME.html', target: '_self' }
        },

        /* åŸæ¥çƒ­ç‚¹ 3ï¼šCONTACT */
        {
          yaw: 8, pitch: 4, cssClass: 'hs-portal',
          createTooltipFunc: imageHotspot,
          createTooltipArgs: {
            width: 170,
            defaultUrl: 'https://i.postimg.cc/nVswMmnY/hui-03.png',
            hoverUrl:   'https://i.postimg.cc/pVZYWXFY/Pinterest.png',
            label: ''
          },
          clickHandlerFunc: navigateHotspot,
          clickHandlerArgs: { url: 'CONTACT.html', target: '_self' }
        },

        /* æ–°å¢ï¼šéŸ³ä¹çƒ­ç‚¹ï¼ˆç‚¹å‡»åˆ‡æ¢æ’­æ”¾/æš‚åœï¼›æ‚¬åœæ˜¾ç¤º hover å›¾ï¼›æ’­æ”¾æ—¶å¯æ˜¾ç¤º playing å›¾ï¼‰ */
        {
          yaw: -30, pitch: -5, cssClass: 'hs-portal hs-music',
          createTooltipFunc: musicHotspot,
          createTooltipArgs: {
            width: 140,
            defaultUrl: 'OLD.png',      // é™éŸ³/é»˜è®¤å›¾ç‰‡ï¼ˆè¯·æ›¿æ¢ï¼‰
            hoverUrl:   'OLD.png',    // æ‚¬åœå›¾ç‰‡ï¼ˆè¯·æ›¿æ¢ï¼‰
            playingUrl: 'OLD.png',       // æ’­æ”¾æ—¶å›¾ç‰‡ï¼ˆå¯é€‰ï¼Œæœªæä¾›åˆ™ç”¨ hoverUrlï¼‰
            audioSrc:   '2025-09-12 05-24-40.mp3'        // èƒŒæ™¯éŸ³ä¹æ–‡ä»¶ï¼ˆè¯·æ›¿æ¢ï¼‰
          }
        }
      ]
    });

    // Pannellum å¤±è´¥å…œåº•ï¼ˆæ¯”å¦‚å›¾ç‰‡ 404 / CORSï¼‰
    try {
      viewer.on('error', function(){
        document.getElementById('fallback').style.display = 'grid';
      });
    } catch(e) { /* æŸäº›ç‰ˆæœ¬æ—  error äº‹ä»¶ï¼Œå¿½ç•¥ */ }

    // é¢„åŠ è½½å„çƒ­ç‚¹ hover å›¾ + éŸ³ä¹å°é¢ï¼Œé¿å…é¦–æ¬¡åˆ‡æ¢é—ªçƒ
    (function preload(){
      [
        'https://i.postimg.cc/vTq8ZSfy/05.png',
        'https://i.postimg.cc/dQrHFYsJ/Inspo.png',
        'https://i.postimg.cc/pVZYWXFY/Pinterest.png',
        /* éŸ³ä¹çƒ­ç‚¹ç›¸å…³ï¼ˆå ä½ï¼Œè¯·ç”¨ä½ çš„æ–‡ä»¶ï¼‰ */
        'music-off.png','music-hover.png','music-on.png'
      ].forEach(src=>{
        const i = new Image(); i.referrerPolicy = 'no-referrer'; i.src = src;
      });
      // ä¹Ÿé¢„åŠ è½½éŸ³é¢‘èµ„æºï¼ˆæµè§ˆå™¨å¯èƒ½å»¶åä¸‹è½½ï¼‰
      const a = new Audio(); a.preload = 'auto'; a.src = 'bg-music.mp3';
    })();

    // 3) è‡ªå®šä¹‰çƒ­ç‚¹ï¼šå›¾ç‰‡ + hoverï¼ˆæ¡Œé¢ï¼‰/ è§¦æ‘¸è½»è§¦ï¼ˆç§»åŠ¨ï¼‰
    function imageHotspot(hotSpotDiv, args) {
      const imgBox = document.createElement('div');
      imgBox.className = 'hs-img';

      // å°ºå¯¸è®¾ç½®
      if (args.width) {
        imgBox.style.width = args.width + 'px';
        imgBox.style.height = (args.height ? args.height : args.width) + 'px';
      }

      const normal = args.defaultUrl;
      const hover  = args.hoverUrl || args.defaultUrl;
      imgBox.style.backgroundImage = `url("${normal}")`;

      // æ¡Œé¢ hover
      imgBox.addEventListener('mouseenter', () => {
        imgBox.style.backgroundImage = `url("${hover}")`;
      });
      imgBox.addEventListener('mouseleave', () => {
        imgBox.style.backgroundImage = `url("${normal}")`;
      });

      // è§¦æ‘¸â€œè½»è§¦â€æ¨¡æ‹Ÿ hoverï¼ˆçŸ­æš‚åˆ‡æ¢åšåé¦ˆï¼‰
      imgBox.addEventListener('touchstart', () => {
        imgBox.style.backgroundImage = `url("${hover}")`;
        setTimeout(()=>{ imgBox.style.backgroundImage = `url("${normal}")`; }, 180);
      }, {passive:true});

      hotSpotDiv.appendChild(imgBox);

      // å¯é€‰ï¼šæ–‡å­—æ ‡ç­¾
      if (args.label) {
        const label = document.createElement('div');
        label.className = 'hs-label';
        label.textContent = args.label;
        hotSpotDiv.appendChild(label);
      }
    }

    // ===== music hotspot: ä¸“ç”¨çƒ­ç‚¹ï¼Œå¸¦æ’­æ”¾æ§åˆ¶ä¸çŠ¶æ€æ›´æ–° =====
    function musicHotspot(hotSpotDiv, args) {
      hotSpotDiv.classList.add('hs-music');
      // ä¿å­˜ URLs åˆ° dataset ä»¥ä¾¿å…¨å±€æ›´æ–°æ—¶è¯»å–
      hotSpotDiv.dataset.defaultUrl = args.defaultUrl || '';
      hotSpotDiv.dataset.hoverUrl = args.hoverUrl || args.defaultUrl || '';
      hotSpotDiv.dataset.playingUrl = args.playingUrl || args.hoverUrl || args.defaultUrl || '';
      hotSpotDiv.dataset.audioSrc = args.audioSrc || '';

      const imgBox = document.createElement('div');
      imgBox.className = 'hs-img';
      if (args.width) {
        imgBox.style.width = args.width + 'px';
        imgBox.style.height = (args.height ? args.height : args.width) + 'px';
      }

      // åˆå§‹æ˜¾ç¤ºï¼ˆå¦‚æœ autoplay æˆåŠŸåä¼šæ›´æ–°ï¼‰
      imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.defaultUrl}")`;
      hotSpotDiv.appendChild(imgBox);

      // å°è§’æ ‡ï¼ˆå¯è§è¡¨ç¤ºè¯¥çƒ­ç‚¹æ˜¯éŸ³ä¹ï¼‰
      const badge = document.createElement('span');
      badge.className = 'music-badge';
      hotSpotDiv.appendChild(badge);

      // æ¡Œé¢ hoverï¼šä¼˜å…ˆæ˜¾ç¤º hover å›¾ï¼ˆä¸å½±å“æ’­æ”¾çŠ¶æ€ï¼Œä½† mouseleave åæ¢å¤æ’­æ”¾/é»˜è®¤å›¾ï¼‰
      imgBox.addEventListener('mouseenter', () => {
        imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.hoverUrl}")`;
      });
      imgBox.addEventListener('mouseleave', () => {
        // æ ¹æ®æ’­æ”¾çŠ¶æ€æ¢å¤
        if (isPlaying) {
          imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.playingUrl}")`;
        } else {
          imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.defaultUrl}")`;
        }
      });

      // ç§»åŠ¨ç«¯ touch åé¦ˆï¼ˆçŸ­æš‚æ˜¾ç¤º hoverï¼‰
      imgBox.addEventListener('touchstart', () => {
        imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.hoverUrl}")`;
        setTimeout(()=> {
          if (isPlaying) imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.playingUrl}")`;
          else imgBox.style.backgroundImage = `url("${hotSpotDiv.dataset.defaultUrl}")`;
        }, 200);
      }, {passive:true});

      // ç‚¹å‡»åˆ‡æ¢æ’­æ”¾/æš‚åœ â€”â€” å¹¶ç¡®ä¿ audio src å·²è®¾ç½®
      hotSpotDiv.addEventListener('click', (e) => {
        // å¦‚æœ hotspot è‡ªå¸¦ audioSrcï¼Œåˆ‡æ¢åˆ°è¯¥æº
        const audioSrc = hotSpotDiv.dataset.audioSrc;
        if (audioSrc && bgAudio.src !== audioSrc) {
          bgAudio.src = audioSrc;
        }
        toggleAudio();
      });

      // å¦‚æœé¡µé¢ä¸€è½½å…¥å°±åº”è¯¥å°è¯• autoplayï¼ˆä½ è¦æ±‚â€œç‚¹å¼€ç½‘é¡µè‡ªåŠ¨æ’­æ”¾éŸ³ä¹â€ï¼‰
      // æˆ‘ä»¬åœ¨æ­¤å¤„å°è¯• autoplayï¼ˆå¦‚æœæµè§ˆå™¨å…è®¸ï¼‰
      if (hotSpotDiv.dataset.audioSrc) {
        // slight delay to allow browser to set up audio element
        setTimeout(()=> {
          tryAutoplay(hotSpotDiv.dataset.audioSrc);
        }, 250);
      }
    }

    // 4) ç‚¹å‡»çƒ­ç‚¹è·³è½¬ï¼ˆåŸé€»è¾‘ï¼‰
    function navigateHotspot(event, args) {
      if (!args || !args.url) return;
      if (args.target === '_blank') {
        window.open(args.url, '_blank', 'noopener');
      } else {
        window.location.assign(args.url); // åŒåŸŸåé¡µé¢
      }
    }

    // â€”â€” å°å·¥å…·ï¼šæŒ‰ D é”®æ‰“å°å½“å‰ yaw/pitchï¼ˆå¾®è°ƒçƒ­ç‚¹ä½ç½®ï¼‰ â€”â€” 
    window.addEventListener('keydown', (e) => {
      if (e.key.toLowerCase() === 'd') {
        console.log('yaw:', viewer.getYaw().toFixed(2), 'pitch:', viewer.getPitch().toFixed(2));
      }
    });

    // å½“éŸ³é¢‘å¼€å§‹/æš‚åœåï¼Œæ›´æ–°çƒ­ç‚¹æ˜¾ç¤ºï¼ˆè‹¥ç”¨æˆ·é€šè¿‡å…¶å®ƒæ–¹å¼æ§åˆ¶ audioï¼Œä¹Ÿèƒ½åæ˜ ï¼‰
    bgAudio.addEventListener('play', ()=> { isPlaying=true; updateMusicHotspotsVisual(); });
    bgAudio.addEventListener('pause', ()=> { isPlaying=false; updateMusicHotspotsVisual(); });
    bgAudio.addEventListener('ended', ()=> { isPlaying=false; updateMusicHotspotsVisual(); });

  </script>
  <noscript>
    <div class="fallback" style="display:grid">
      æœ¬é¡µé¢ä¾èµ– JavaScript/WebGLã€‚ä½ ä¹Ÿå¯ä»¥è®¿é—® <a href="mobile.html">mobile.html</a>ã€‚
    </div>
  </noscript>
</body>
</html>
